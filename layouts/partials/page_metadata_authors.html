{{/* =========================
   Authors (keep it simple)
   ========================= */}}

{{ $authors := .Params.authors }}

{{ if $authors }}
<div class="authors">
  {{ range $i, $a := $authors }}
    <span class="author">{{ $a | markdownify }}</span>{{ if lt $i (sub (len $authors) 1) }}, {{ end }}
  {{ end }}
</div>
{{ end }}

{{/* =========================
   Equal contribution legend (create)
   ========================= */}}

{{ $has_equal := false }}
{{ with .Params.author_notes }}
  {{ range . }}
    {{ if eq . "Equal contribution" }}{{ $has_equal = true }}{{ end }}
  {{ end }}
{{ end }}

{{ if $has_equal }}
<div id="equal-contrib-legend" style="font-size:0.85em; margin-top:0.25em; line-height:1.3;">
  (* Equal contribution)
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const legend = document.getElementById('equal-contrib-legend');
  if (!legend) return;

  // publication(학회/저널) 라인 요소를 찾고, 그 다음 줄로 legend를 이동
  const pub =
    document.querySelector('.pub-publication') ||
    document.querySelector('[class*="pub-publication"]');

  if (pub && pub.parentNode) {
    pub.insertAdjacentElement('afterend', legend);
  } else {
    // publication을 못 찾으면 (레이아웃 차이) 그냥 현재 위치(저자 아래)에 남겨둠
  }
});
</script>
{{ end }}
