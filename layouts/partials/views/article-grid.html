{{/* Custom 3-column grid for publications, independent of .Items/.Pages */}}

{{/* 1. 사이트 전체에서 publication 섹션 페이지 모으기 */}}
{{ $pages := where site.RegularPages "Section" "publication" }}

{{/* 2. 필요하면 featured=true만 남기고 싶으면 이 줄 주석 해제
{{ $pages = where $pages "Params.featured" true }}
*/}}

{{ if not (gt (len $pages) 0) }}
  <p class="text-sm text-gray-500 dark:text-gray-400">No publications found.</p>
{{ else }}

<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 my-6">
  {{ range $pages }}
  <a href="{{ .RelPermalink }}" class="block group bg-white dark:bg-gray-900 p-5 rounded-xl shadow-md hover:shadow-xl transition-all duration-200">

    {{ with .Params.featured_image }}
    <img src="{{ . }}" class="w-full h-40 object-cover rounded-lg mb-3 group-hover:opacity-90 transition" loading="lazy">
    {{ end }}

    <h3 class="text-lg font-semibold leading-tight group-hover:text-blue-500">
      {{ .Title }}
    </h3>

    {{ with .Params.publication }}
    <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
      {{ . }}
    </p>
    {{ end }}

    {{ with .Params.summary }}
    <p class="text-sm mt-2 opacity-90">
      {{ . }}
    </p>
    {{ end }}

    {{ with .Params.tags }}
    <div class="flex flex-wrap gap-1 mt-3">
      {{ range . }}
      <span class="px-2 py-0.5 text-xs rounded bg-blue-100 text-blue-700 dark:bg-blue-800 dark:text-blue-200">
        {{ . }}
      </span>
      {{ end }}
    </div>
    {{ end }}

  </a>
  {{ end }}
</div>

{{ end }}
