{{ define "main" }}

<section class="container py-8 mx-auto">
  <h1 class="text-3xl font-bold mb-6">Publications</h1>

  {{/* ì´ ì„¹ì…˜ ì•ˆì˜ publication í˜ì´ì§€ë“¤ ìµœì‹ ìˆœìœ¼ë¡œ ì •ë ¬ */}}
  {{ $pages := .RegularPages }}
  {{ $pages = sort $pages "Date" "desc" }}

  {{ if not (gt (len $pages) 0) }}

    <p class="text-sm text-gray-500 dark:text-gray-400">
      No publications found.
    </p>

  {{ else }}

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">

      {{ range $pages }}

        {{ $page := . }}

        <div class="w-full h-full
                    bg-white dark:bg-gray-900 p-5 rounded-xl
                    shadow-md hover:shadow-xl
                    transition-all duration-200">

          {{/* í˜ì´ì§€ ë²ˆë“¤ ë¦¬ì†ŒìŠ¤ì—ì„œ ì´ë¯¸ì§€ ì„ íƒ ë¡œì§ */}}
          {{ $images := $page.Resources.ByType "image" }}
          {{ $img := $images.GetMatch "*feature*" }}
          {{ if and (not $img) (gt (len $images) 0) }}
            {{ $img = index $images 0 }}
          {{ end }}

          {{ with $img }}
            <img src="{{ .RelPermalink }}"
                 class="w-full h-40 object-cover rounded-md mb-3
                        hover:opacity-90 transition"
                 loading="lazy"
                 alt="{{ $page.Title }}">
          {{ end }}

          {{/* ì œëª© */}}
          <p class="text-sm md:text-base font-semibold leading-snug">
            <a href="{{ $page.RelPermalink }}"
               class="no-underline hover:underline hover:text-blue-600">
              {{ $page.Title }}
            </a>
          </p>

          {{/* ì €ì */}}
          {{ $authors := $page.Params.authors }}
          {{ if $authors }}
            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
              {{ delimit $authors ", " }}
            </p>
          {{ end }}

          {{/* í•™íšŒ / ì €ë„ ì´ë¦„ */}}
          {{ with $page.Params.publication }}
            <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">
              {{ . }}
            </p>
          {{ end }}

          {{/* ğŸ”¥ ì—¬ê¸°ê°€ ìƒˆë¡œ ì¶”ê°€ëœ â€œì¹´í…Œê³ ë¦¬/ì•„ì´í…œâ€ ì˜ì—­ ğŸ”¥ */}}
          <div class="mt-3 space-y-2">

            {{/* 1) íƒœê·¸(ì¹´í…Œê³ ë¦¬ ëŠë‚Œ) ì¹©ìœ¼ë¡œ ë³´ì—¬ì£¼ê¸° */}}
            {{ with $page.Params.tags }}
              <div class="flex flex-wrap gap-1">
                {{ range . }}
                  <span class="text-[11px] px-2 py-0.5 rounded-full
                               bg-gray-100 dark:bg-gray-800
                               text-gray-600 dark:text-gray-300">
                    {{ . }}
                  </span>
                {{ end }}
              </div>
            {{ end }}

            {{/* 2) PDF / Project / Code / Dataset ê°™ì€ ë§í¬ ë²„íŠ¼ë“¤ */}}
            <div class="text-xs">
              {{/* Hugo Blox ê¸°ë³¸ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì¬ì‚¬ìš© */}}
              {{ partial "page_links" (dict "content" $page "is_list" 1) }}
            </div>

          </div>
          {{/* ğŸ”¥ ì¶”ê°€ ì˜ì—­ ë ğŸ”¥ */}}

        </div>

      {{ end }}

    </div>

  {{ end }}

</section>

{{ end }}
